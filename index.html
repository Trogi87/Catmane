function startTimer(timerId) {
    const nodeName = document.getElementById(`node-name-${timerId}`).value || `Node ${timerId}`;
    const owner = document.getElementById(`owner-${timerId}`).value;
    const hoursInput = parseInt(document.getElementById(`hours-input-${timerId}`).value, 10) || 0;
    const minutesInput = parseInt(document.getElementById(`minutes-input-${timerId}`).value, 10) || 0;
    const secondsInput = parseInt(document.getElementById(`seconds-input-${timerId}`).value, 10) || 0;

    let totalSeconds = hoursInput * 3600 + minutesInput * 60 + secondsInput;

    if (totalSeconds <= 0) {
        alert("Please enter a valid time!");
        return;
    }

    // Calculate the end time
    const endTime = new Date(Date.now() + totalSeconds * 1000);

    // Format the end time to a readable format (e.g., "08:01:25 AM" or "20:01:25")
    const formattedEndTime = endTime.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false });

    // Display and save the formatted end time
    document.getElementById(`end-time-${timerId}`).textContent = `End: ${formattedEndTime}`;

    timers[timerId] = setInterval(() => {
        if (totalSeconds <= 0) {
            clearInterval(timers[timerId]);
            document.getElementById(`remaining-time-${timerId}`).textContent = `${nodeName}: Time's up!`;
        } else {
            totalSeconds--;
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;

            const remainingTime = `${hours}h ${minutes}m ${seconds}s remaining`;
            document.getElementById(`remaining-time-${timerId}`).textContent = `${nodeName}: ${remainingTime}`;

            // Save the data to Firebase
            timersRef.child(timerId).set({
                name: nodeName,
                owner: owner,
                remainingTime: remainingTime,
                endTime: formattedEndTime
            });

            updateRanks();
        }
    }, 1000);
}
